<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class MatrixHelper </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class MatrixHelper ">
      
      <meta name="description" content="Helper class that contains various static methods">
      <link rel="icon" href="../images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/agailloty/SharpMiner/new/main/apiSpec/new?filename=SharpMiner_MatrixHelper.md&amp;value=---%0Auid%3A%20SharpMiner.MatrixHelper%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/logo.png" alt="SharpMiner">
            SharpMiner
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="SharpMiner.MatrixHelper">



  <h1 id="SharpMiner_MatrixHelper" data-uid="SharpMiner.MatrixHelper" class="text-break">
Class MatrixHelper  <a class="header-action link-secondary" title="View source" href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L12"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="SharpMiner.html">SharpMiner</a></dd></dl>
  <dl><dt>Assembly</dt><dd>SharpMiner.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Helper class that contains various static methods</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static class MatrixHelper</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">MatrixHelper</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="methods">Methods
</h2>


  <a id="SharpMiner_MatrixHelper_CenterAndScale_" data-uid="SharpMiner.MatrixHelper.CenterAndScale*"></a>

  <h3 id="SharpMiner_MatrixHelper_CenterAndScale_MathNet_Numerics_LinearAlgebra_Matrix_System_Double__" data-uid="SharpMiner.MatrixHelper.CenterAndScale(MathNet.Numerics.LinearAlgebra.Matrix{System.Double})">
  CenterAndScale(Matrix&lt;double&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L28"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Centers and scales the columns of the input matrix by subtracting the mean and dividing by the
standard deviation of each column.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Matrix&lt;double&gt; CenterAndScale(Matrix&lt;double&gt; data)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>data</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>The matrix containing the data to be centered and scaled, where each column represents a variable.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A new matrix where each column has been centered (mean subtracted) and scaled (divided by standard deviation).
If a column's standard deviation is zero, the data is only centered, without scaling.</p>
</dd>
  </dl>







  <h4 class="section" id="SharpMiner_MatrixHelper_CenterAndScale_MathNet_Numerics_LinearAlgebra_Matrix_System_Double___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method normalizes the input matrix by making each column have a mean of 0 and a standard deviation of 1,
which is often useful for machine learning algorithms or statistical analysis.</p>
</div>




  <a id="SharpMiner_MatrixHelper_ComputeCorrelationMatrix_" data-uid="SharpMiner.MatrixHelper.ComputeCorrelationMatrix*"></a>

  <h3 id="SharpMiner_MatrixHelper_ComputeCorrelationMatrix_MathNet_Numerics_LinearAlgebra_Matrix_System_Double__" data-uid="SharpMiner.MatrixHelper.ComputeCorrelationMatrix(MathNet.Numerics.LinearAlgebra.Matrix{System.Double})">
  ComputeCorrelationMatrix(Matrix&lt;double&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L195"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Computes the correlation matrix from the given data matrix.
Each column of the data matrix represents a variable, and each row represents an observation.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Matrix&lt;double&gt; ComputeCorrelationMatrix(Matrix&lt;double&gt; data)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>data</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A matrix of size (n x m) where 'n' is the number of observations and 'm' is the number of variables.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A correlation matrix of size (m x m) where the element at (i, j) represents the correlation coefficient between variables i and j.</p>
</dd>
  </dl>











  <a id="SharpMiner_MatrixHelper_ComputeSignFlip_" data-uid="SharpMiner.MatrixHelper.ComputeSignFlip*"></a>

  <h3 id="SharpMiner_MatrixHelper_ComputeSignFlip_MathNet_Numerics_LinearAlgebra_Factorization_Svd_System_Double__MathNet_Numerics_LinearAlgebra_Matrix_System_Double__MathNet_Numerics_LinearAlgebra_Matrix_System_Double___MathNet_Numerics_LinearAlgebra_Matrix_System_Double___" data-uid="SharpMiner.MatrixHelper.ComputeSignFlip(MathNet.Numerics.LinearAlgebra.Factorization.Svd{System.Double},MathNet.Numerics.LinearAlgebra.Matrix{System.Double},MathNet.Numerics.LinearAlgebra.Matrix{System.Double}@,MathNet.Numerics.LinearAlgebra.Matrix{System.Double}@)">
  ComputeSignFlip(Svd&lt;double&gt;, Matrix&lt;double&gt;, out Matrix&lt;double&gt;, out Matrix&lt;double&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L139"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>The <code>ComputeSignFlip</code> function adjusts the signs of the singular vectors
(both left and right) from the Singular Value Decomposition (SVD) of a matrix
in a consistent way. This is necessary because the SVD of a matrix is not
unique: the signs of the singular vectors can be arbitrarily flipped (positive
or negative) without changing the mathematical correctness of the decomposition.
This function resolves these ambiguities by ensuring consistent signs across
both the left and right singular vectors.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void ComputeSignFlip(Svd&lt;double&gt; svd, Matrix&lt;double&gt; X, out Matrix&lt;double&gt; U_prime, out Matrix&lt;double&gt; V_prime)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>svd</code> <span class="xref">Svd</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>The <span class="xref">MathNet.Numerics.LinearAlgebra.Factorization.Svd&lt;T&gt;</span> object that represents the singular value
decomposition of a matrix. This object contains three components:</p>
<ul><li>U: Matrix of left singular vectors (orthonormal).</li><li>V: Matrix of right singular vectors (orthonormal), typically 
transposed as VT in MathNet.</li><li>S: Diagonal matrix of singular values (non-negative real numbers).</li></ul>
</dd>
    <dt><code>X</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>The original matrix for which the SVD was computed. This matrix is used in the
sign-flipping algorithm to help determine the appropriate signs of the singular
vectors.</p>
</dd>
    <dt><code>U_prime</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>Output matrix of left singular vectors (<code>U_prime</code>) with adjusted signs.
This matrix is a copy of <code>U</code>, where the signs of its columns are flipped
as necessary to ensure consistency between the left and right singular vectors.</p>
</dd>
    <dt><code>V_prime</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>Output matrix of right singular vectors (<code>V_prime</code>) with adjusted signs.
Similar to <code>U_prime</code>, this matrix is derived from <code>V</code>, but with
adjusted signs to maintain consistency with the left singular vectors.</p>
</dd>
  </dl>








  <h4 class="section" id="SharpMiner_MatrixHelper_ComputeSignFlip_MathNet_Numerics_LinearAlgebra_Factorization_Svd_System_Double__MathNet_Numerics_LinearAlgebra_Matrix_System_Double__MathNet_Numerics_LinearAlgebra_Matrix_System_Double___MathNet_Numerics_LinearAlgebra_Matrix_System_Double____remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
In the context of the Singular Value Decomposition (SVD), given a matrix <code>X</code>, 
it can be factored into:
<code>X = U * S * V^T</code>, where:
<ul><li><code>U</code> is a matrix of left singular vectors (orthonormal columns).</li><li><code>S</code> is a diagonal matrix of singular values (non-negative, real numbers).</li><li><code>V^T</code> is the transpose of the matrix of right singular vectors (orthonormal rows).</li></ul>
<p>
However, the SVD is not unique because for any singular vector <code>u_k</code> and 
<code>v_k</code> (the k-th left and right singular vectors), flipping the sign of both 
(i.e., replacing <code>u_k</code> with <code>-u_k</code> and <code>v_k</code> with <code>-v_k</code>) 
leaves the product <code>X = U * S * V^T</code> unchanged. This means that without 
further constraints, there can be ambiguity in the signs of the singular vectors.
</p>
<p>
The <code>ComputeSignFlip</code> function eliminates this ambiguity by ensuring that 
the signs of the left (<code>U</code>) and right (<code>V</code>) singular vectors are 
consistent. The function evaluates the sign of each singular vector by 
analyzing its relationship with the original data matrix <code>X</code>. It adjusts 
the signs of the singular vectors to minimize inconsistencies, leading to a 
more interpretable and consistent SVD.
</p>
<p>
This process is useful when using SVD for dimensionality reduction, principal 
component analysis (PCA), and other applications where the interpretability and 
consistency of the singular vectors is important.
</p>
</div>




  <a id="SharpMiner_MatrixHelper_GetWeighedMatrix_" data-uid="SharpMiner.MatrixHelper.GetWeighedMatrix*"></a>

  <h3 id="SharpMiner_MatrixHelper_GetWeighedMatrix_MathNet_Numerics_LinearAlgebra_Matrix_System_Double__MathNet_Numerics_LinearAlgebra_Vector_System_Double__MathNet_Numerics_LinearAlgebra_Vector_System_Double__" data-uid="SharpMiner.MatrixHelper.GetWeighedMatrix(MathNet.Numerics.LinearAlgebra.Matrix{System.Double},MathNet.Numerics.LinearAlgebra.Vector{System.Double},MathNet.Numerics.LinearAlgebra.Vector{System.Double})">
  GetWeighedMatrix(Matrix&lt;double&gt;, Vector&lt;double&gt;, Vector&lt;double&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L252"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Applies row and column weights to the input matrix by adjusting each element based on the
square roots of the corresponding row and column weights. This transformation is often used in
dimensionality reduction techniques such as Principal Component Analysis (PCA) to balance the
influence of each row and column while preserving the overall structure of the data.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Matrix&lt;double&gt; GetWeighedMatrix(Matrix&lt;double&gt; X, Vector&lt;double&gt; rowWeights = null, Vector&lt;double&gt; colWeights = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>X</code> <span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>The input matrix where rows represent observations and columns represent features.</p>
</dd>
    <dt><code>rowWeights</code> <span class="xref">Vector</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A vector of weights corresponding to each row in the matrix. If not provided, uniform weights
are assumed, meaning each row has an equal contribution. The weights are normalized to sum to 1.</p>
</dd>
    <dt><code>colWeights</code> <span class="xref">Vector</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A vector of weights corresponding to each column in the matrix. If not provided, each column
is assumed to have an equal weight of 1, meaning each feature has an equal contribution.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">Matrix</span>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a>&gt;</dt>
    <dd><p>A new matrix where each element is scaled by the square root of its respective row and column weights.</p>
</dd>
  </dl>







  <h4 class="section" id="SharpMiner_MatrixHelper_GetWeighedMatrix_MathNet_Numerics_LinearAlgebra_Matrix_System_Double__MathNet_Numerics_LinearAlgebra_Vector_System_Double__MathNet_Numerics_LinearAlgebra_Vector_System_Double___remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>The square root of the weights is used to ensure that the overall weighting remains balanced.
Multiplying by the square root of both row and column weights means that the scaling for each
matrix element is proportional to the contribution of both its row and column without overly
inflating or diminishing the influence of any single weight. This allows the matrix to be transformed
in such a way that maintains relative distances between data points, which is crucial for algorithms
like PCA, where geometric relationships (such as variance) are important.</p>
</div>





</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/agailloty/SharpMiner/blob/main/src/SharpMiner/MatrixHelper.cs/#L12" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          SharpMiner
        </div>
      </div>
    </footer>
  </body>
</html>
